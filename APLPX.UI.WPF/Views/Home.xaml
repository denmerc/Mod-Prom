<UserControl
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	xmlns:controls="clr-namespace:MahApps.Metro.Controls;assembly=MahApps.Metro"
    xmlns:vm="clr-namespace:APLPX.UI.WPF.ViewModels"
	xmlns:telerik="http://schemas.telerik.com/2008/xaml/presentation"
    mc:Ignorable="d"
	x:Class="APLPX.UI.WPF.HomeVerticalControl"
	x:Name="UserControl"
	d:DesignWidth="951" d:DesignHeight="1126" 
    
    
    >
<UserControl.Resources>
    <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <!-- for design-time support, already in app.xml-->
            <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/VS/Colors.xaml" />
            <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/VS/Styles.xaml" />
            <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/FlatButton.xaml" />
            <!--<ResourceDictionary Source="pack://application:,,,/MahApps.Metro.Resources;component/Icons.xaml" />-->
            </ResourceDictionary.MergedDictionaries>

        <!-- Application Brushes --><!--
        <SolidColorBrush x:Key="ApplicationBackground" Color="LightGray"/>
        <SolidColorBrush x:Key="ApplicationForeground" Color="DarkGray"/>
        <SolidColorBrush x:Key="ApplicationTextForeground" Color="DarkSlateGray"/>
        <SolidColorBrush x:Key="ApplicationHighlight" Color="White"/>

        <Style
				x:Key="ButtonFocusVisual">
            <Setter
					Property="Control.Template">
                <Setter.Value>
                    <ControlTemplate>
                        <Rectangle Margin="2" SnapsToDevicePixels="true" Stroke="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}" StrokeThickness="1" StrokeDashArray="1 2" />
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="MetroButton" TargetType="{x:Type Button}">
            <Setter Property="FocusVisualStyle" Value="{StaticResource ButtonFocusVisual}"/>
            <Setter Property="Background" Value="#EEEEEEEE"/>
            <Setter Property="Foreground" Value="Black"/>
            <Setter Property="HorizontalContentAlignment" Value="Center"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Padding" Value="10 5"/>
            <Setter Property="FontSize" Value="14" />
            <Setter Property="BorderThickness" Value="2" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Button}">
                        <Grid>
                            <Border
									x:Name="Border"
									Background="{TemplateBinding Background}"
									BorderBrush="{TemplateBinding BorderBrush}"
									BorderThickness="{TemplateBinding BorderThickness}" />

                            <ContentPresenter
									HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
									Margin="{TemplateBinding Padding}"
									VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
									RecognizesAccessKey="True" />
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="OpacityMask" Value="#AA888888"/>
                                <Setter Property="Margin" Value="2 1" />
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="BorderThickness" Value="0"/>
                                <Setter Property="Background" Value="DimGray"/>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="false">
                                <Setter Property="Foreground" Value="#ADADAD"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        --><!-- Application Styles --><!--
        <Style TargetType="{x:Type TextBlock}" x:Key="ApplicationText">
            <Setter Property="Foreground" Value="{StaticResource ApplicationTextForeground}"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="Bold"/>
        </Style>

        <Style TargetType="{x:Type TextBlock}" x:Key="ListItemTextStyle">
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="20"/>
            <Setter Property="FontWeight" Value="Bold"/>
        </Style>

        <Style TargetType="{x:Type TextBlock}" x:Key="ListTextStyle">
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="HorizontalAlignment" Value="Right"/>
        </Style>

        <ControlTemplate TargetType="{x:Type Button}" x:Key="GoButton">
            <Grid>
                <VisualStateManager.VisualStateGroups>
                    <VisualStateGroup x:Name="CommonStates">
                        <VisualState x:Name="Normal">
                            <Storyboard>
                                <ColorAnimation Duration="0:0:0"
										Storyboard.TargetName="ButtonBackgroundBrush"
										Storyboard.TargetProperty="Color" To="{TemplateBinding Background}"/>
                            </Storyboard>
                        </VisualState>
                        <VisualState x:Name="MouseOver">
                            <Storyboard>
                                <ColorAnimation Duration="0:0:0"
										Storyboard.TargetName="ButtonBackgroundBrush"
										Storyboard.TargetProperty="Color" To="LightSlateGray"/>
                            </Storyboard>
                        </VisualState>
                        <VisualState x:Name="Pressed">
                            <Storyboard>
                                <ColorAnimation Duration="0:0:0"
										Storyboard.TargetName="ButtonBackgroundBrush"
										Storyboard.TargetProperty="Color" To="White"/>
                            </Storyboard>
                        </VisualState>
                    </VisualStateGroup>
                </VisualStateManager.VisualStateGroups>
                <Border BorderBrush="{TemplateBinding Foreground}"
						BorderThickness="1"
						Padding="10">
                    <Border.Background>
                        <SolidColorBrush x:Name="ButtonBackgroundBrush" 
								Color="{TemplateBinding Background}" />
                    </Border.Background>
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <ContentPresenter Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="2" 
								HorizontalAlignment="Left" />




                    </Grid>
                </Border>
            </Grid>
        </ControlTemplate>

        <ControlTemplate TargetType="{x:Type Button}" x:Key="GoButtonActive">
            <Grid>
                <VisualStateManager.VisualStateGroups>
                    <VisualStateGroup x:Name="CommonStates">
                        <VisualState x:Name="Normal">
                            <Storyboard>
                                <ColorAnimation Duration="0:0:0"
										Storyboard.TargetName="ButtonBackgroundBrush"
										Storyboard.TargetProperty="Color" To="{TemplateBinding Background}"/>
                            </Storyboard>
                        </VisualState>
                        <VisualState x:Name="MouseOver">
                            <Storyboard>
                                <ColorAnimation Duration="0:0:0"
										Storyboard.TargetName="ButtonBackgroundBrush"
										Storyboard.TargetProperty="Color" To="LightSlateGray"/>
                            </Storyboard>
                        </VisualState>
                        <VisualState x:Name="Pressed">
                            <Storyboard>
                                <ColorAnimation Duration="0:0:0"
										Storyboard.TargetName="ButtonBackgroundBrush"
										Storyboard.TargetProperty="Color" To="White"/>
                            </Storyboard>
                        </VisualState>
                    </VisualStateGroup>
                </VisualStateManager.VisualStateGroups>
                <Border BorderBrush="{TemplateBinding Foreground}"
						BorderThickness="2"
						Padding="10">
                    <Border.Background>
                        <SolidColorBrush x:Name="ButtonBackgroundBrush" 
								Color="{TemplateBinding Background}" />
                    </Border.Background>
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <ContentPresenter Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="2" 
								HorizontalAlignment="Left" />




                    </Grid>
                </Border>
            </Grid>
        </ControlTemplate>
        <Style TargetType="{x:Type Button}" x:Key="GoButtonStyle">
            <Setter Property="Foreground" Value="{StaticResource ApplicationTextForeground}"/>
            <Setter Property="Background" Value="{StaticResource ApplicationBackground}"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Padding" Value="7,3"/>
            <Setter Property="Margin" Value="5"/>
            <Setter Property="Template" Value="{StaticResource GoButton}" />
            <Setter Property="Height" Value="60"/>
        </Style>

        <Style TargetType="{x:Type Button}" x:Key="GoButtonStyleActive">
            <Setter Property="Foreground" Value="{StaticResource ApplicationTextForeground}"/>
            <Setter Property="Background" Value="{StaticResource ApplicationBackground}"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Padding" Value="7,3"/>
            <Setter Property="Margin" Value="5"/>
            <Setter Property="Template" Value="{StaticResource GoButtonActive}" />
            <Setter Property="Height" Value="60"/>

        </Style>

        <Style x:Key="Flat">
            <Setter Property="Control.Background" Value="LightGray" />
            <Setter Property="Control.BorderBrush" Value="DarkGray" />
            <Setter Property="Control.BorderThickness" Value="0" />
            <Style.Triggers>
                <Trigger Property="UIElement.IsMouseOver" Value="True">
                    <Setter Property="Control.Background" Value="{x:Null}" />
                    <Setter Property="Control.BorderBrush" Value="{x:Null}" />
                </Trigger>
                <Trigger Property="UIElement.IsFocused" Value="True">
                    <Setter Property="Control.FontWeight" Value="Bold" />
                </Trigger>
            </Style.Triggers>
        </Style>-->
    </ResourceDictionary>
</UserControl.Resources>
<Grid x:Name="LayoutRoot">

    <DockPanel x:Name="DetailContentDockPanel">

        <Grid x:Name="DetailGrid">
            <Grid.ColumnDefinitions>
                <ColumnDefinition />
                <ColumnDefinition Width="225" />
            </Grid.ColumnDefinitions>


            <TabControl Margin="25,20,0,20">
                <TabItem Header="Home">
                            
                        <WrapPanel x:Name="TabContentStackPanel" Orientation="Horizontal">
                            <ListBox x:Name="ModuleListBox"  Margin="20 40 0 10" Height="Auto" Width="Auto" SelectionChanged="ModuleListBox_SelectionChanged"
                          SelectedIndex="{Binding SelectedSubModuleIndex}"
				                    VerticalAlignment="Top">
                                <ListBox.ItemsPanel>
                                    <ItemsPanelTemplate>

                                        <WrapPanel Orientation="Vertical"/>

                                    </ItemsPanelTemplate>
                                </ListBox.ItemsPanel>
                                <ListBoxItem x:Name="AnalyticsListItem" Tag="{Binding SubModuleKeys[0]}" Selected="AnalyticsListItem_Selected"
                                         Width="125" Height="125" HorizontalAlignment="Left">

                                    <StackPanel VerticalAlignment="Center" >
                                        <!--<TextBlock TextAlignment="Center" FontSize="40"
            							        Foreground="{StaticResource Foreground}">-->
                                        <!--<Run Text="Analytics" BaselineAlignment="Center"/>-->
                                        <!--<InlineUIContainer>-->
                                        <Canvas xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" Grid.Column="0" Grid.Row="0" x:Name="home_module_analytic" 
                                                Width="75" Height="75"  
                                                Margin="5" Clip="F1 M 0,0L 76,0L 76,76L 0,76L 0,0">
                                            <Path Width="75" Height="75" Canvas.Left="0" Canvas.Top="0" Stretch="Fill" Fill="White" Data="F1 M 22,52L 22,35L 30,35L 30,52L 22,52 Z M 32,52L 32,22L 39,22L 39,52L 32,52 Z M 41,52L 41,41L 49,41L 49,52L 41,52 Z M 51,52L 51,29L 59,29L 59,52L 51,52 Z M 17,19L 20,19L 20,54L 59,54L 59,57L 17,57L 17,19 Z "/>
                                        </Canvas>
                                        <!--</InlineUIContainer>-->
                                        <!--</TextBlock>-->
                                        <TextBlock FontSize="15" TextAlignment="Center"
							            Foreground="{StaticResource Foreground}" Text="Analytics"/>
                                    </StackPanel>
                                </ListBoxItem>
                                <ListBoxItem Width="125" Height="125" HorizontalAlignment="Left" Tag="{Binding SubModuleKeys[1]}">
                                    <StackPanel VerticalAlignment="Center">
                                        <Canvas xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" x:Name="appbar_currency_rubles" Width="75" Height="75" Margin="5" Clip="F1 M 0,0L 76,0L 76,76L 0,76L 0,0">
                                            <!--<Path Width="75" Height="75" Stretch="Fill" Fill="White" Data="F1 M 41.5625,38C 45.4975,38 48.6875,34.81 48.6875,30.875C 48.6875,26.94 45.4975,23.75 41.5625,23.75L 34.8333,23.75L 34.8333,38L 41.5625,38 Z M 28.5,19L 41.9583,19C 48.5167,19 53.8333,24.3166 53.8333,30.875C 53.8333,37.4334 48.5167,42.75 41.9583,42.75L 34.8333,42.75L 34.8333,47.5L 49.0833,47.5L 49.0833,52.25L 34.8333,52.25L 34.8333,57L 28.5,57L 28.5,52.25L 22.1667,52.25L 22.1667,47.5L 28.5,47.5L 28.5,42.75L 22.1667,42.75L 22.1667,38L 28.5,38L 28.5,19 Z "/>-->
                                            <Path Width="75" Height="75" Canvas.Left="0" Canvas.Top="0" Stretch="Fill" Fill="White" Data="F1 M 19,19L 20.1875,19L 20.1875,57L 19,57L 19,19 Z M 22.1666,19L 23.75,19L 23.75,57L 22.1666,57L 22.1666,19 Z M 25.3333,19L 28.5,19L 28.5,57L 25.3333,57L 25.3333,19 Z M 30.0833,19L 31.6666,19L 31.6666,57L 30.0833,57L 30.0833,19 Z M 33.25,19L 34.0416,19L 34.0416,57L 33.25,57L 33.25,19 Z M 38,19L 42.75,19L 42.75,57L 38,57L 38,19 Z M 44.3333,19L 45.9166,19L 45.9166,57L 44.3333,57L 44.3333,19 Z M 50.6667,19L 53.8333,19L 53.8333,57L 50.6667,57L 50.6667,19 Z M 55.4167,19L 57,19L 57,57L 55.4167,57L 55.4167,19 Z M 47.5,19L 48.2917,19L 48.2917,57L 47.5,57L 47.5,19 Z "/>
                                        </Canvas>
                                        <TextBlock FontSize="15"  TextAlignment="Center"
							Foreground="{StaticResource Foreground}" Text="Everyday"/>
                                    </StackPanel>
                                </ListBoxItem>
                                <ListBoxItem Width="125" Height="125" HorizontalAlignment="Left" Tag="{Binding SubModuleKeys[2]}">
                                    <StackPanel VerticalAlignment="Center">



                                        <Canvas xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" x:Name="appbar_tag" Width="75" Height="75" Margin="5" Clip="F1 M 0,0L 76,0L 76,76L 0,76L 0,0">
                                            <Path Width="75" Height="75" Stretch="Fill" Fill="White" Data="F1 M 24.5416,19L 33.25,19L 55.4167,41.1667C 56.6533,42.4033 56.6533,44.4083 55.4167,45.645L 45.645,55.4167C 44.4084,56.6533 42.4033,56.6533 41.1667,55.4167L 19,33.25L 19,24.5417C 19,22.6945 19,20.8472 19.9236,19.9236C 20.8472,19 22.6944,19 24.5416,19 Z M 26.9167,23.75C 25.1678,23.75 23.75,25.1678 23.75,26.9167C 23.75,28.6656 25.1678,30.0833 26.9167,30.0833C 28.6656,30.0833 30.0833,28.6656 30.0833,26.9167C 30.0833,25.1678 28.6656,23.75 26.9167,23.75 Z "/>

                                        </Canvas>


                                        <TextBlock FontSize="15" TextAlignment="Center"
							Foreground="{StaticResource Foreground}" Text="Promotions"/>
                                    </StackPanel>
                                </ListBoxItem>
                                <ListBoxItem Width="125" Height="125" HorizontalAlignment="Left" Tag="{Binding SubModuleKeys[3]}">
                                    <StackPanel VerticalAlignment="Center">

                                        <Canvas xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" x:Name="appbar_tiles_add2" Width="75" Height="75"   Margin="5" Clip="F1 M 0,0L 76,0L 76,76L 0,76L 0,0">
                                            <Path Grid.Column="0" Grid.Row="1" Width="75" Height="75" Stretch="Fill" Fill="White" Data="F1 M 18,40L 36,40L 36,58L 18,58L 18,40 Z M 40,58L 40,40L 58,40L 58,58L 40,58 Z M 40,36L 40,18L 58,18L 58,36L 40,36 Z M 29,36L 25,36L 25,29L 18,29L 18,25L 25,25L 25,18L 29,18L 29,25L 36,25L 36,29L 29,29L 29,36 Z "/>
                                        </Canvas>

                                        <TextBlock FontSize="15" TextAlignment="Center" 
							Foreground="{StaticResource Foreground}" Text="Kits"/>
                                    </StackPanel>
                                </ListBoxItem>
                                <!--<ListBoxItem Width="125" Height="125" HorizontalAlignment="Left" Tag="{Binding SubModuleKeys[4]}">
                                    <StackPanel VerticalAlignment="Center">

                                        <Canvas xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" x:Name="appbar_list_check" Width="76" Height="76" Clip="F1 M 0,0L 76,0L 76,76L 0,76L 0,0">
                                            <Path Width="75" Height="75" Stretch="Fill" Fill="White" Data="F1 M 30.4792,27.3126L 56.6041,27.3126C 57.9158,27.3126 58.9791,27.9801 58.9791,29.2918C 58.9791,30.6034 57.9158,31.2709 56.6041,31.2709L 30.4792,31.2709C 29.1675,31.2709 28.1042,30.6034 28.1042,29.2917C 28.1042,27.98 29.1675,27.3126 30.4792,27.3126 Z M 30.4791,36.8125L 60.9582,36.8126C 62.2699,36.8126 63.3332,37.4801 63.3332,38.7918C 63.3332,40.1035 61.8827,40.6887 60.571,40.6887L 30.092,40.6886C 28.7803,40.6886 28.1041,40.1034 28.1041,38.7917C 28.1041,37.48 29.1675,36.8125 30.4791,36.8125 Z M 30.4792,46.3125L 53.0415,46.3126C 54.3532,46.3126 55.4165,46.9801 55.4165,48.2917C 55.4165,49.6034 54.3532,50.2709 53.0415,50.2709L 30.4792,50.2709C 29.1675,50.2709 28.1042,49.6034 28.1042,48.2917C 28.1042,46.98 29.1675,46.3125 30.4792,46.3125 Z M 16.6122,46.3508L 19.3192,48.7386L 24.1458,42.75L 26.3037,45.1378L 20.2769,52.25L 18.6042,52.25L 14.7735,48.4866L 14.7735,46.3508L 16.6122,46.3508 Z M 16.8293,36.8508L 19.5363,39.2386L 24.3629,33.25L 26.5208,35.6378L 20.494,42.75L 18.8213,42.75L 14.9906,38.9866L 14.9906,36.8508L 16.8293,36.8508 Z M 16.8293,27.3508L 19.5363,29.7385L 24.3629,23.75L 26.5208,26.1378L 20.494,33.25L 18.8213,33.25L 14.9906,29.4866L 14.9906,27.3508L 16.8293,27.3508 Z "/>
                                        </Canvas>

                                        <TextBlock FontSize="15" TextAlignment="Center" 
                                			Foreground="{StaticResource Foreground}" Text="My Settings"/>
                                    </StackPanel>
                                </ListBoxItem>-->
                                <!--large version of module button-->
                                <!--<ListBoxItem>
                                                    <StackPanel>
                                                        <TextBlock FontSize="40" TextAlignment="Center"
							                Foreground="{StaticResource Foreground}"><InlineUIContainer>
								                <Canvas xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" x:Name="appbar_tiles_add2" Width="75" Height="75"   Margin="5" Clip="F1 M 0,0L 76,0L 76,76L 0,76L 0,0">
									                <Path Grid.Column="0" Grid.Row="1" Width="75" Height="75" Stretch="Fill" Fill="White" Data="F1 M 18,40L 36,40L 36,58L 18,58L 18,40 Z M 40,58L 40,40L 58,40L 58,58L 40,58 Z M 40,36L 40,18L 58,18L 58,36L 40,36 Z M 29,36L 25,36L 25,29L 18,29L 18,25L 25,25L 25,18L 29,18L 29,25L 36,25L 36,29L 29,29L 29,36 Z "/>
								                </Canvas>
							                </InlineUIContainer></TextBlock>
                                                        <TextBlock FontSize="25" TextAlignment="Center" MinWidth="150"
							                Foreground="{StaticResource Foreground}" Text="Kits"/>
                                                    </StackPanel>
                                </ListBoxItem>-->
                            </ListBox>
                            <StackPanel Orientation="Vertical">
                            <StackPanel x:Name="FavTagStack" Orientation="Vertical" Width="Auto" Height="Auto" Visibility="{Binding IsTagsDisplayed}" Margin="15 40 10 0">
                                <TextBlock Text="Folders" FontSize="25"></TextBlock>
                                <Separator ></Separator>
                                <ListBox x:Name="FavTagListBox" Margin="0 15 0 0" ItemsSource="{Binding SelectedFavTags, UpdateSourceTrigger=PropertyChanged}"
                                         Height="Auto" Width="200" SelectionChanged="FavTagListBox_SelectionChanged">
                                    <ListBox.ItemTemplate>
                                        <DataTemplate>
                                            <TextBlock FontSize="16"
								                        Foreground="{StaticResource Foreground}"><Run Text="{Binding Mode=OneWay}"/>

                                            </TextBlock>
                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                </ListBox>

                                <!--<Separator></Separator>-->
                            </StackPanel>
                            <StackPanel x:Name="TagStack" Orientation="Vertical" Width="Auto" Height="Auto" 
                                        Visibility="{Binding IsTagsDisplayed}" Margin="15 10 10 0">
                                <TextBlock Text="Folder Search" FontSize="23" FontWeight="Normal"></TextBlock>
                                <Separator ></Separator>

                                    <telerik:RadAutoCompleteBox x:Name="TagSearchBox" ItemsSource="{Binding Tags}" SelectionChanged="TagSearchBox_SelectionChanged"
                                                            WatermarkContent="--Enter Keyword Here--"
                                                            AutoCompleteMode="Suggest"
                                                            Width="200" Margin="0 5"
                                                            Background="White" FontSize="16" Foreground="Black"
                                                                
                                                                TextSearchMode="Contains"
                                                                />

                                    <!--<ListBox x:Name="TagListBox" Margin="0 10 0 0" ItemsSource="{Binding Tags, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                                         Height="250" Width="200" SelectionChanged="TagListBox_SelectionChanged">
                                    <ListBox.ItemTemplate>
                                        <DataTemplate>



                                            --><!--<Button Content="{Binding}" 
                                                        Background="Transparent"
                                                        BorderThickness="0"
                                                        Foreground="{StaticResource Foreground}" 
                                                        
                                                        FontSize="16"  
                                                        Width="Auto" Height="Auto" Margin="0" Padding="0"
                                                        
                                                        
                                                        BorderBrush="Transparent"
                                                        VerticalContentAlignment="Stretch" HorizontalContentAlignment="Stretch"
                                                        >

                                                <Button.Template>
                                                        <ControlTemplate TargetType="Button">
                                                        <ContentPresenter Content="{TemplateBinding Content}"/>
                                                        </ControlTemplate>
                                                    </Button.Template>
                                                </Button>--><!--


                                            <TextBlock FontSize="16"
								                        Foreground="{StaticResource Foreground}"><Run Text="{Binding Mode=OneWay}"/>

                                            </TextBlock>


                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                </ListBox>-->
                                <!--<Label Margin="15 10 10 0" FontSize="15" FontWeight="SemiBold">Group:</Label>-->
                                <!--<ComboBox Width="200"
                                          Margin="0, 0, 0, 0"
                                          controls:TextboxHelper.Watermark="Select a Group/SubGroup"
                                          ToolTip="Select A Group/SubGroup"
                                          DisplayMemberPath="Group2"
                                          IsEditable="True"
                                          IsEnabled="True"
                                          ItemsSource="{Binding Session.Analytics}"
                                          Text="{Binding Path=Group2}"
                                          controls:ComboBoxHelper.EnableVirtualizationWithGrouping="True"
                                          x:Name="groupingComboBox">
                                                        <ComboBox.GroupStyle>
                                                            <GroupStyle>
                                                                <GroupStyle.HeaderTemplate>
                                                                    <DataTemplate>
                                                                        <TextBlock Text="{Binding Path=Name.Group1}" />
                                                                    </DataTemplate>
                                                                </GroupStyle.HeaderTemplate>
                                                            </GroupStyle>
                                                        </ComboBox.GroupStyle>
                                </ComboBox>-->
                                <!--<TreeView x:Name="GroupTree" Margin="10" SelectedItemChanged="GroupTree_SelectedItemChanged">
                                    <TreeViewItem IsExpanded="True" Header="User">
                                        <TreeViewItem IsExpanded="True" Header="Group 1.1">
                                            <TreeViewItem IsExpanded="True" Header="Group 1.1.1" />
                                            <TreeViewItem IsExpanded="True" Header="Group 1.1.2" />
                                        </TreeViewItem>
                                        <TreeViewItem  IsExpanded="True" Header="Group 1.2" />
                                        <TreeViewItem  IsExpanded="True" Header="Group 1.3" />
                                    </TreeViewItem>
                                    <TreeViewItem IsExpanded="False" Header="Shared">
                                        <TreeViewItem IsExpanded="True" Header="Group 3.1">
                                            <TreeViewItem IsExpanded="True" Header="Group 3.1.1" />
                                            <TreeViewItem IsExpanded="True" Header="Group 3.1.2" />
                                        </TreeViewItem>
                                        <TreeViewItem IsExpanded="True" Header="Group 3.2" />
                                        <TreeViewItem IsExpanded="True" Header="Group 3.3" />
                                    </TreeViewItem>
                                </TreeView>-->
                                <!--<controls:ToggleSwitch x:Name="IsOwnedToggle" IsChecked="False" Unchecked="IsOwnedToggle_Unchecked"
                                    Margin="20 20 20 20" OnLabel="Owned By Me" OffLabel="Not Owned By Me" Checked="IsOwnedToggle_Checked"/>-->
                                <!--<controls:ToggleSwitch Style="{DynamicResource CustomMetroToggleSwitch}"
                                   IsChecked="True"
                                   Margin="0, 5, 0, 0" />-->

                                <!--<Separator></Separator>-->
                            </StackPanel>
                            </StackPanel>
                            <StackPanel x:Name="FilterStackPanel" Orientation="Vertical"  Margin="5">
                                <StackPanel.Resources>
                                    <Style x:Key="CustomMetroToggleSwitch"
                                       TargetType="{x:Type controls:ToggleSwitch}"
                                       BasedOn="{StaticResource {x:Type controls:ToggleSwitch}}">
                                                        <Setter Property="SwitchForeground"
                                            Value="Red" />
                                                        <Setter Property="OnLabel"
                                            Value="True" />
                                                        <Setter Property="OffLabel"
                                            Value="False" />
                                    </Style>
                                </StackPanel.Resources>
                                
                                <!--<ListBox x:Name="FilterListBox" Margin="0 50 0 0" Height="Auto" Width="Auto" Visibility="Collapsed" SelectionChanged="Filters_SelectionChanged">
                                <ListBoxItem x:Name="AirFilters">
                                    <StackPanel>
                                        <TextBlock FontSize="16"
								Foreground="{StaticResource Foreground}"><Run Text="Air &amp; Fuel Delivery"/></TextBlock>
                                        --><!--<TextBlock FontSize="18"
                                           Foreground="{StaticResource Foreground}"><Run Text="Rank: Lieutenant"/></TextBlock>
                                                    <TextBlock FontSize="18"
                                           Foreground="{StaticResource Foreground}"><Run Text="Position: Helm Officer"/></TextBlock>
                                                    <TextBlock FontSize="18"
                                           Foreground="#AAAAAA"><Run Text="Current action: Sleeping"/></TextBlock>--><!--
                                    </StackPanel>
                                </ListBoxItem>
                                <ListBoxItem x:Name="BedMats">
                                    <StackPanel>
                                        <TextBlock FontSize="16"
								Foreground="{StaticResource Foreground}"><Run Text="Bed Mats &amp; Tonneau Covers"/></TextBlock>

                                    </StackPanel>
                                </ListBoxItem>
                                <ListBoxItem x:Name="Books">
                                    <StackPanel>
                                        <TextBlock FontSize="16"
								Foreground="{StaticResource Foreground}"><Run Text="Books"/></TextBlock>
                                    </StackPanel>
                                </ListBoxItem>
                                <ListBoxItem x:Name="Brakes" Selected="BrakesItem_Selected">
                                    <StackPanel>
                                        <TextBlock FontSize="16"
								Foreground="{StaticResource Foreground}"><Run Text="Brake Systems"/></TextBlock>
                                    </StackPanel>
                                </ListBoxItem>
                                <ListBoxItem x:Name="Bumpers">
                                    <StackPanel>
                                        <TextBlock FontSize="16"
								Foreground="{StaticResource Foreground}"><Run Text="Bumpers &amp; Hardware"/></TextBlock>
                                    </StackPanel>
                                </ListBoxItem>
                                <ListBoxItem x:Name="CarCare">
                                    <StackPanel>
                                        <TextBlock FontSize="16"
								Foreground="{StaticResource Foreground}"><Run Text="Car Care &amp; Paint"/></TextBlock>

                                    </StackPanel>
                                </ListBoxItem>
                                <ListBoxItem x:Name="VideoSoftware">
                                    <StackPanel>
                                        <TextBlock FontSize="16"
								Foreground="{StaticResource Foreground}"><Run Text="Video and Software"/></TextBlock>

                                    </StackPanel>
                                </ListBoxItem>
                                <ListBoxItem x:Name="LoyaltyPoints">
                                    <StackPanel>
                                        <TextBlock FontSize="16"
								Foreground="{StaticResource Foreground}"><Run Text="Loyalty Points"/></TextBlock>
                                    </StackPanel>
                                </ListBoxItem>
                            </ListBox>-->
                            
                                <!--<ListBox x:Name="FilterListBox0" Margin="0 25 0 0" ItemsSource="{Binding Session.Analytics}" Height="Auto" Width="Auto"  SelectionChanged="Filters_SelectionChanged">
                                    <ListBox.ItemTemplate>
                                        <DataTemplate>

                                            <StackPanel>
                                                <TextBlock FontSize="16"
								                        Foreground="{StaticResource Foreground}"><Run Text="{Binding Name}"/></TextBlock>
                                            </StackPanel>

                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                </ListBox>
                                <Separator></Separator>-->
                                
                                <StackPanel Visibility="{Binding IsFiltersDisplayed}">                                    
                                    <TextBlock Text="Analytics" FontSize="25" Margin="5 35 0 0"></TextBlock>
                                    <Separator ></Separator>
                                    <controls:MetroProgressBar IsIndeterminate="True" Visibility="{Binding IsProgressBarAOn}"
                                       x:Name="ProgressBarA"
                                       Minimum="200"
                                       Maximum="800"
                                       Width="60" 
                                       Foreground="{StaticResource Foreground}"
                                       Margin="0, 0, 0, 0" />
                            <!--<telerik:RadProgressBar  IsIndeterminate="True" Orientation="Horizontal" Margin="5"></telerik:RadProgressBar>-->

                                    <ListBox x:Name="FilterListBox" Margin="0 10 0 0" ItemsSource="{Binding Analytics}" Height="Auto" Width="Auto"  SelectionChanged="Filters_SelectionChanged"  SelectedItem="{Binding SelectedAnalytic}">
                                        <ListBox.ItemTemplate>
                                            <DataTemplate>

                                                    <StackPanel>
                                                        <TextBlock FontSize="16"
								                            Foreground="{StaticResource Foreground}"><Run Text="{Binding Name}"/></TextBlock>
                                                    </StackPanel>

                                            </DataTemplate>
                                        </ListBox.ItemTemplate>
                                    </ListBox>
                                </StackPanel>
                                <StackPanel Visibility="{Binding IsFiltersPDisplayed}">
                                    <TextBlock Text="Price Routines" FontSize="25" Margin="5 35 0 0"></TextBlock>
                                    <Separator ></Separator>
                                    <controls:MetroProgressBar IsIndeterminate="True" Visibility="{Binding IsProgressBarPOn}"
                                       x:Name="ProgressBarP"
                                       Minimum="200"
                                       Maximum="800"
                                       Width="60"
                                       Foreground="{StaticResource Foreground}"
                                       Margin="0, 0, 0, 0" />
                                    <ListBox x:Name="FilterPListBox" Margin="0 10 0 0" ItemsSource="{Binding PriceRoutines}" Height="Auto" Width="Auto" SelectionChanged="Filters_SelectionChanged"  SelectedItem="{Binding SelectedPriceRoutine}">
                                    <ListBox.ItemTemplate>
                                        <DataTemplate>

                                            <StackPanel>
                                                <TextBlock FontSize="16"
								                        Foreground="{StaticResource Foreground}"><Run Text="{Binding Name}"/></TextBlock>
                                            </StackPanel>

                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                </ListBox>
                                </StackPanel>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal">
                                
                                <WrapPanel x:Name="AnalyticTabDetail" Background="Transparent"
                                           Visibility="{Binding IsDetailDisplayed, UpdateSourceTrigger=Explicit}">

                                <WrapPanel.Resources>
                                    <!--<ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Controls.AnimatedTabControl.xaml" />-->
                                </WrapPanel.Resources>
                                    <!--<ContentControl x:Name="DetailControl" ></ContentControl>-->
                                    <StackPanel Margin="20 40 0 40" Width="600" HorizontalAlignment="Left">
                                        <TextBlock x:Name="AnalyticTitle" FontSize="25" Foreground="White" Text="{Binding SelectedAnalytic.Name}" />
                                        <Separator Margin="0 2 0 15"></Separator>
                                        <!--<TextBlock FontSize="18" Foreground="White" Text="All OPGI Parts" />-->
                                        <!--<TextBlock FontSize="18" Foreground="White" Text="Status: "  />-->
                                        <TextBlock FontSize="18" Foreground="White">
                                            <Run Text="Status: " /><Run Text="{Binding SelectedAnalytic.Status}"/>
                                        </TextBlock>
                                        <TextBlock FontSize="18" Foreground="White">
                                            <Run Text="Description: "/><Run Text="{Binding SelectedAnalytic.Description}"/>
                                        </TextBlock>
                                   
                                        <TextBlock FontSize="18" Foreground="White">
                                            <Run Text="Last Updated: "/><Run Text="{Binding SelectedAnalytic.LastUpdated}"/>
                                        </TextBlock>

                                        <TextBlock FontSize="18" Foreground="White">
                                            <Run Text="Last User Updated: "/><Run Text="{Binding SelectedAnalytic.LastUserUpdated}"/>
                                        </TextBlock>
                                    
                                        <ListView ItemsSource="{Binding SelectedAnalytic.Tags}" Margin="0 10 10 10" Height="500" Width="Auto"/>
                                        
                                    </StackPanel>
                            </WrapPanel>
                                <WrapPanel x:Name="PricingTabDetail" Background="Transparent"
                                           Visibility="{Binding IsPDetailDisplayed, UpdateSourceTrigger=PropertyChanged}">

                                    <WrapPanel.Resources>
                                        <!--<ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Controls.AnimatedTabControl.xaml" />-->
                                    </WrapPanel.Resources>
                                    <!--<ContentControl x:Name="DetailControl" ></ContentControl>-->
                                    <StackPanel Margin="20 40 0 40" Width="600" HorizontalAlignment="Left">
                                        <TextBlock x:Name="PricingTitle" FontSize="25" Foreground="White" 
                                                   Text="{Binding SelectedPriceRoutine.Name}" />
                                        <Separator Margin="0 2 0 15"></Separator>
                                        <!--<TextBlock FontSize="18" Foreground="White" Text="All OPGI Parts" />-->
                                        <!--<TextBlock FontSize="18" Foreground="White" Text="Status: "  />-->
                                        <!--<TextBlock FontSize="18" Foreground="White">
                                            <Run Text="Status: " /><Run Text="{Binding SelectedPriceRoutine.Status}"/>
                                        </TextBlock>-->
                                        <TextBlock FontSize="18" Foreground="White">
                                            <Run Text="Description: "/><Run Text="{Binding SelectedPriceRoutine.Description}"/>
                                        </TextBlock>

                                        <TextBlock FontSize="18" Foreground="White">
                                            <Run Text="Last Updated: "/><Run Text="{Binding SelectedPriceRoutine.LastUpdated}"/>
                                        </TextBlock>

                                        <TextBlock FontSize="18" Foreground="White">
                                            <Run Text="Last User Updated: "/><Run Text="{Binding SelectedPriceRoutine.LastUserUpdated}"/>
                                        </TextBlock>

                                        <ListView ItemsSource="{Binding SelectedPriceRoutine.Tags}" Margin="0 10 10 10" Height="200" Width="Auto"/>
                                        <!--<TabControl Margin="0, 50, 0, 0"
                                        TabStripPlacement="Top"
                                        Height="300" Width="850">
                                    -->
                                        <!--<TabItem Header="Identity" >
                                        <StackPanel Margin="10">
                                            <TextBlock x:Name="AnalyticTitle2" FontSize="30" Foreground="White" Text="{Binding Name}" />
                                            <TextBlock FontSize="18" Foreground="White" Text="All OPGI Parts" />
                                            <TextBlock FontSize="18" Foreground="White" Text="Status: Active"  />
                                            <TextBlock FontSize="18" Foreground="White" Text="Comments:"  />
                                            <TextBlock TextWrapping="WrapWithOverflow" FontSize="14" Foreground="White" Text="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras eget lectus mollis, faucibus nibh eget, rutrum sem. Ut sed sollicitudin tortor, nec tincidunt nunc. Duis venenatis sagittis elit, quis porta mi lacinia vel. Vivamus interdum, lectus sodales consequat volutpat, massa tortor faucibus nisl, eu bibendum risus urna in nisl. Donec consequat sed ante placerat pharetra. In sit amet felis posuere, lacinia risus ac, cursus felis. Maecenas consequat elit a enim aliquet fermentum. Vestibulum bibendum ipsum ut mauris condimentum sollicitudin. Nullam pharetra id eros nec accumsan. Ut laoreet a purus id placerat. Suspendisse mauris sapien, rhoncus quis auctor a, elementum in velit. Quisque id arcu pellentesque, pulvinar lorem id, ornare elit. Vivamus rutrum eu purus id placerat. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egesta" />
                                        </StackPanel>
                                    </TabItem>-->
                                        <!--
                                    <TabItem Header="Filters"  >
                                        <StackPanel Margin="10">
                                            <TreeView x:Name="FilterTreeView" SelectedItemChanged="FilterTreeView_SelectedItemChanged">
                                                <TreeViewItem Header="Filter 1">
                                                    <TreeViewItem Header="Filter 1.1">
                                                        <TreeViewItem Header="Filter 1.1.1" />
                                                        <TreeViewItem Header="Filter 1.1.2" />
                                                    </TreeViewItem>
                                                    <TreeViewItem Header="Filter 1.2" />
                                                    <TreeViewItem Header="Filter 1.3" />
                                                </TreeViewItem>
                                                <TreeViewItem Header="Filter 22" />
                                                <TreeViewItem Header="Filter 3">
                                                    <TreeViewItem Header="Filter 3.1">
                                                        <TreeViewItem Header="Filter 3.1.1" />
                                                        <TreeViewItem Header="Filter 3.1.2" />
                                                    </TreeViewItem>
                                                    <TreeViewItem Header="Filter 3.2" />
                                                    <TreeViewItem Header="Filter 3.3" />
                                                </TreeViewItem>
                                            </TreeView>
                                        </StackPanel>
                                    </TabItem>
                                    <TabItem Header="Price Lists">
                                        <StackPanel Margin="10">
                                            <TreeView>
                                                <TreeViewItem Header="Price List 1">
                                                    <TreeViewItem Header="Price List 1.1">
                                                        <TreeViewItem Header="Price List 1.1.1" />
                                                        <TreeViewItem Header="Price List 1.1.2" />
                                                    </TreeViewItem>
                                                    <TreeViewItem Header="Price List 1.2" />
                                                    <TreeViewItem Header="Price List 1.3" />
                                                </TreeViewItem>
                                                <TreeViewItem Header="Price List 22" />
                                                <TreeViewItem Header="Price List 3">
                                                    <TreeViewItem Header="Price List 3.1">
                                                        <TreeViewItem Header="Price List 3.1.1" />
                                                        <TreeViewItem Header="Price List 3.1.2" />
                                                    </TreeViewItem>
                                                    <TreeViewItem Header="Price List 3.2" />
                                                    <TreeViewItem Header="Price List 3.3" />
                                                </TreeViewItem>
                                            </TreeView>
                                        </StackPanel>
                                    </TabItem>
                                    <TabItem Header="Value Drivers">
                                        <StackPanel Margin="10">
                                            <TreeView >
                                                <TreeViewItem Header="Value Driver 1">
                                                    <TreeViewItem Header="Value Driver 1.1">
                                                        <TreeViewItem Header="Value Driver 1.1.1" />
                                                        <TreeViewItem Header="Value Driver 1.1.2" />
                                                    </TreeViewItem>
                                                    <TreeViewItem Header="Value Driver 1.2" />
                                                    <TreeViewItem Header="Value Driver 1.3" />
                                                </TreeViewItem>
                                                <TreeViewItem Header="Value Driver 22" />
                                                <TreeViewItem Header="Value Driver 3">
                                                    <TreeViewItem Header="Value Driver 3.1">
                                                        <TreeViewItem Header="Value Driver 3.1.1" />
                                                        <TreeViewItem Header="Value Driver 3.1.2" />
                                                    </TreeViewItem>
                                                    <TreeViewItem Header="Value Driver 3.2" />
                                                    <TreeViewItem Header="Value Driver 3.3" />
                                                </TreeViewItem>
                                            </TreeView>
                                        </StackPanel>
                                    </TabItem>
                                </TabControl>-->
                                    </StackPanel>
                                </WrapPanel>

                            </StackPanel>
                    </WrapPanel>
               </TabItem>
            </TabControl>
                <!--<ContentControl x:Name="MarginControl" ></ContentControl>-->
                <StackPanel x:Name="MarginStackPanel" Grid.Column="1" Margin="10,25,10,0" Visibility="{Binding IsActionBarOn, UpdateSourceTrigger=PropertyChanged}">
                <TextBlock Margin="0,10,0,10"
                                    FontSize="18"
                                    Foreground="{StaticResource Foreground}"
                                    Text="Actions" />
                <Separator Background="#11FFFFFF" />
                <Button x:Name="AddNewAnalyticButton" FontSize="14" Margin="0,10,0,3"
                                        Content="Add..." Visibility="Visible"
                                        Style="{StaticResource LinkButton}" Click="AddNewAnalyticButton_Click" />
                <Button x:Name="CopyAnalyticButton" FontSize="14"
                                        Margin="0,3,0,10"
                                        Content="Copy..."
                                        Click="CopyAnalyticButton_Click" Visibility="Collapsed"
                                        Style="{StaticResource LinkButton}" />
                <Button x:Name="RenameButton" FontSize="14"
                                        Margin="0,3,0,10"
                                        Content="Edit..."
                                        Click="RenameButton_Click"
                                        Style="{StaticResource LinkButton}" />
               
                    
                    
                    
                <!--<Button x:Name="FilterButton" FontSize="14"
                                        Margin="0,3,0,10"
                                        Content="Add/Edit Filters..."
                                        Click="FilterButton_Click"
                                        Style="{StaticResource LinkButton}" />
                    
                --><!--<Button x:Name="PriceListButton" FontSize="14"
                                        Margin="0,3,0,10"
                                        Content="Add/Edit Price Lists..."
                                        Click="PriceListButton_Click"
                                        Style="{StaticResource LinkButton}" />--><!--
                <Button x:Name="ValueDriversButtons" FontSize="14"
                                        Margin="0,3,0,10"
                                        Click="ValueDriversButtons_Click"
                                        Content="Add/Edit Value Drivers..."
                                        Style="{StaticResource LinkButton}" />-->
                    
                    
                    
                    
                <Button x:Name="CreatePriceRoutineButton" FontSize="14"
                                        Margin="0,3,0,10"
                                        Click="CreatePriceRoutineButton_Click" Visibility="Collapsed"
                                        Content="Attach Price Routine..."
                                        Style="{StaticResource LinkButton}" />
                <Separator Background="#11FFFFFF" />
                <TextBlock Margin="0,10,0,10"
                                    FontSize="18"
                                    Foreground="{StaticResource Foreground}"
                                    Text="Related" />
                <Separator Background="#11FFFFFF" />
                    <Button x:Name="RelatedPriceRoutineButton" FontSize="14" Margin="0,10,0,3"
                                        Content="Price Routine-Brakes-837438..."
                                        Style="{StaticResource LinkButton}" Click="RelatedPriceRoutineButton_Click" 
                                        Visibility="Collapsed"
                            />
                    <TextBlock Margin="0,10,0,10"
                                        FontSize="18"
                                        Foreground="{StaticResource Foreground}"
                                        Text="Recent" />
                <Separator Background="#11FFFFFF" />
                <Button FontSize="14"
                                    Margin="0,10,0,3"
                                    Content="Widget Price Routine 123244" Visibility="Collapsed"
                                    Style="{StaticResource LinkButton}" />
                <Button FontSize="14"
                                    Margin="0,3,0,3"
                                    Content="Air filters - 123123" Visibility="Collapsed"
                                    Style="{StaticResource LinkButton}" />
            </StackPanel>
        </Grid>
    </DockPanel>
</Grid>
</UserControl>